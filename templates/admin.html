<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ã‡∏∏‡∏ô‡∏ô‡∏∞‡∏´‡πå‡πÑ‡∏ó‡∏¢ | Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans Thai', sans-serif;
        }

        .font-arabic {
            font-family: 'Amiri', serif;
        }

        .stat-card {
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
        }

        .tab-active {
            border-bottom: 3px solid #7C3AED;
            color: #7C3AED;
        }

        .sidebar-link {
            transition: all 0.2s;
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: linear-gradient(to right, #F3E8FF, #FCE7F3);
            border-left: 3px solid #7C3AED;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 min-h-screen">
    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-white/90 backdrop-blur shadow-lg min-h-screen fixed left-0 top-0 z-50">
            <div class="p-6 border-b border-purple-100">
                <h1
                    class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                    üåô ‡∏ã‡∏∏‡∏ô‡∏ô‡∏∞‡∏´‡πå‡πÑ‡∏ó‡∏¢
                </h1>
                <p class="text-xs text-gray-400 mt-1">Admin Dashboard</p>
            </div>
            <nav class="py-4">
                <a href="#dashboard" class="sidebar-link active block px-6 py-3 text-gray-700 flex items-center gap-3"
                    data-section="dashboard">
                    <span>üìä</span> Dashboard
                </a>
                <a href="#books" class="sidebar-link block px-6 py-3 text-gray-600 flex items-center gap-3"
                    data-section="books">
                    <span>üìö</span> ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠
                </a>
                <a href="#hadiths" class="sidebar-link block px-6 py-3 text-gray-600 flex items-center gap-3"
                    data-section="hadiths">
                    <span>üìñ</span> ‡∏´‡∏∞‡∏î‡∏µ‡∏©
                </a>
                <a href="#kitabs" class="sidebar-link block px-6 py-3 text-gray-600 flex items-center gap-3"
                    data-section="kitabs">
                    <span>üìÅ</span> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                </a>
                <a href="#translations" class="sidebar-link block px-6 py-3 text-gray-600 flex items-center gap-3"
                    data-section="translations">
                    <span>üåê</span> ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•
                </a>
                <div class="border-t border-gray-100 my-4"></div>
                <a href="/" class="sidebar-link block px-6 py-3 text-gray-400 flex items-center gap-3">
                    <span>üè†</span> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-64 p-8">
            <!-- Dashboard Section -->
            <section id="sec-dashboard" class="section">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">üìä Dashboard</h2>
                    <p class="text-gray-500">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö</p>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                    <div class="stat-card bg-white/80 backdrop-blur rounded-2xl p-6 border border-purple-100 shadow-sm">
                        <div class="text-3xl font-bold text-purple-600" id="stat-total-hadiths">-</div>
                        <div class="text-sm text-gray-500 mt-1">‡∏´‡∏∞‡∏î‡∏µ‡∏©‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div class="stat-card bg-white/80 backdrop-blur rounded-2xl p-6 border border-green-100 shadow-sm">
                        <div class="text-3xl font-bold text-green-600" id="stat-translated">-</div>
                        <div class="text-sm text-gray-500 mt-1">‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß</div>
                    </div>
                    <div class="stat-card bg-white/80 backdrop-blur rounded-2xl p-6 border border-orange-100 shadow-sm">
                        <div class="text-3xl font-bold text-orange-500" id="stat-pending">-</div>
                        <div class="text-sm text-gray-500 mt-1">‡∏£‡∏≠‡πÅ‡∏õ‡∏•</div>
                    </div>
                    <div class="stat-card bg-white/80 backdrop-blur rounded-2xl p-6 border border-blue-100 shadow-sm">
                        <div class="text-3xl font-bold text-blue-600" id="stat-books">-</div>
                        <div class="text-sm text-gray-500 mt-1">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="bg-white/80 backdrop-blur rounded-2xl p-6 border border-purple-100 shadow-sm mb-8">
                    <div class="flex justify-between items-center mb-3">
                        <span class="font-medium text-gray-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•</span>
                        <span class="text-purple-600 font-bold" id="progress-percent">0%</span>
                    </div>
                    <div class="h-4 bg-gray-200 rounded-full overflow-hidden">
                        <div id="progress-bar"
                            class="h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-500"
                            style="width: 0%"></div>
                    </div>
                </div>

                <!-- Per Book Stats -->
                <div class="bg-white/80 backdrop-blur rounded-2xl p-6 border border-purple-100 shadow-sm">
                    <h3 class="font-bold text-gray-800 mb-4">üìö ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h3>
                    <div id="books-stats" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </section>

            <!-- Books Section -->
            <section id="sec-books" class="section hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">üìö ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h2>
                    <p class="text-gray-500">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏´‡∏∞‡∏î‡∏µ‡∏©‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                </div>
                <div class="bg-white/80 backdrop-blur rounded-2xl shadow-sm border border-purple-100 overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gradient-to-r from-purple-100 to-pink-100">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏£‡∏±‡∏ö</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∞‡∏î‡∏µ‡∏©</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">%</th>
                            </tr>
                        </thead>
                        <tbody id="books-table" class="divide-y divide-gray-100">
                            <tr>
                                <td colspan="5" class="text-center py-8 text-gray-400">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Hadiths Section -->
            <section id="sec-hadiths" class="section hidden">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">üìñ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏∞‡∏î‡∏µ‡∏©</h2>
                        <p class="text-gray-500">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏∞‡∏î‡∏µ‡∏©</p>
                    </div>
                </div>

                <!-- Search & Filter -->
                <div class="bg-white/80 backdrop-blur rounded-2xl p-4 border border-purple-100 shadow-sm mb-6">
                    <div class="flex flex-wrap gap-4">
                        <select id="hadith-book-filter"
                            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</option>
                        </select>
                        <select id="hadith-status-filter"
                            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                            <option value="translated">‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß</option>
                            <option value="pending">‡∏£‡∏≠‡πÅ‡∏õ‡∏•</option>
                        </select>
                        <input type="text" id="hadith-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..."
                            class="flex-1 min-w-[200px] px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300">
                        <button onclick="searchHadiths()"
                            class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                    </div>
                </div>

                <!-- Hadiths Table -->
                <div class="bg-white/80 backdrop-blur rounded-2xl shadow-sm border border-purple-100 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gradient-to-r from-purple-100 to-pink-100">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">ID</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏´‡∏°‡∏ß‡∏î</th>
                                    <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</th>
                                </tr>
                            </thead>
                            <tbody id="hadiths-table" class="divide-y divide-gray-100">
                                <tr>
                                    <td colspan="6" class="text-center py-8 text-gray-400">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏´‡∏∞‡∏î‡∏µ‡∏©</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- Pagination -->
                    <div class="px-4 py-3 bg-gray-50 flex justify-between items-center">
                        <span class="text-sm text-gray-500" id="hadith-pagination-info">-</span>
                        <div class="flex gap-2">
                            <button id="btn-prev" onclick="changePage(-1)"
                                class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50">‚Üê
                                ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                            <button id="btn-next" onclick="changePage(1)"
                                class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                                ‚Üí</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Kitabs Section -->
            <section id="sec-kitabs" class="section hidden">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">üìÅ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h2>
                        <p class="text-gray-500">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏∞‡∏î‡∏µ‡∏©</p>
                    </div>
                    <button onclick="addKitab()"
                        class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 flex items-center gap-2">
                        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>

                <div class="bg-white/80 backdrop-blur rounded-xl p-4 mb-6 border border-purple-100">
                    <div class="flex items-center gap-4">
                        <label class="font-medium text-gray-700">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠:</label>
                        <select id="kitab-book-select"
                            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300"
                            onchange="loadKitabs()">
                            <!-- Dynamic options -->
                        </select>
                    </div>
                </div>

                <div class="bg-white/80 backdrop-blur rounded-2xl shadow-sm border border-purple-100 overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gradient-to-r from-purple-100 to-pink-100">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢</th>
                                <th class="px-4 py-3 text-right text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏£‡∏±‡∏ö</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∞‡∏î‡∏µ‡∏©</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</th>
                            </tr>
                        </thead>
                        <tbody id="kitabs-table" class="divide-y divide-gray-100">
                            <tr>
                                <td colspan="5" class="text-center py-8 text-gray-400">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Translations Section -->
            <section id="sec-translations" class="section hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">üåê ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•</h2>
                    <p class="text-gray-500">‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏´‡∏∞‡∏î‡∏µ‡∏©</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Missing Arabic -->
                    <div class="bg-white/80 backdrop-blur rounded-2xl p-6 border border-red-100 shadow-sm">
                        <h3 class="font-bold text-gray-800 mb-4">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏ö‡∏ó‡∏≠‡∏≤‡∏´‡∏£‡∏±‡∏ö</h3>
                        <div class="text-4xl font-bold text-red-500 mb-2" id="missing-arabic">-</div>
                        <p class="text-sm text-gray-500">‡∏´‡∏∞‡∏î‡∏µ‡∏©‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏≤‡∏´‡∏£‡∏±‡∏ö</p>
                        <button onclick="runScript('fill_missing_arabic')"
                            class="mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm">
                            üîß ‡∏£‡∏±‡∏ô Script ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                    </div>

                    <!-- English in Thai -->
                    <div class="bg-white/80 backdrop-blur rounded-2xl p-6 border border-orange-100 shadow-sm">
                        <h3 class="font-bold text-gray-800 mb-4">‚ö†Ô∏è ‡∏°‡∏µ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏õ‡∏ô</h3>
                        <div class="text-4xl font-bold text-orange-500 mb-2" id="english-in-thai">-</div>
                        <p class="text-sm text-gray-500">‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏õ‡∏ô</p>
                        <button onclick="runScript('fix_english')"
                            class="mt-4 px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 text-sm">
                            üîß ‡∏£‡∏±‡∏ô Script ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                    </div>
                </div>

                <!-- Recent Translations -->
                <div class="bg-white/80 backdrop-blur rounded-2xl p-6 border border-purple-100 shadow-sm mt-6">
                    <h3 class="font-bold text-gray-800 mb-4">üìã ‡∏´‡∏∞‡∏î‡∏µ‡∏©‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                    <div id="recent-translations" class="space-y-3">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Edit Hadith Modal -->
    <div id="hadith-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-bold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏∞‡∏î‡∏µ‡∏©</h2>
            </div>
            <form id="hadith-form" class="p-6 space-y-4">
                <input type="hidden" id="hf-id">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</label>
                        <input type="text" id="hf-book" readonly
                            class="w-full px-4 py-2 border border-gray-200 rounded-lg bg-gray-50">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</label>
                        <input type="text" id="hf-no" readonly
                            class="w-full px-4 py-2 border border-gray-200 rounded-lg bg-gray-50">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ï‡∏±‡∏ß‡∏ö‡∏ó‡∏≠‡∏≤‡∏´‡∏£‡∏±‡∏ö</label>
                    <textarea id="hf-ar" rows="4" dir="rtl"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg font-arabic text-lg text-right"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡πÑ‡∏ó‡∏¢</label>
                    <textarea id="hf-th" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
                    <select id="hf-status" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        <option value="pending">‡∏£‡∏≠‡πÅ‡∏õ‡∏•</option>
                        <option value="translated">‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß</option>
                    </select>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">üíæ
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    <button type="button" onclick="closeHadithModal()"
                        class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Kitab Modal -->
    <div id="kitab-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-100">
                <h2 id="kitab-modal-title" class="text-xl font-bold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏°‡∏ß‡∏î</h2>
            </div>
            <form id="kitab-form" class="p-6 space-y-4">
                <input type="hidden" id="kf-id">
                <input type="hidden" id="kf-book">
                <input type="hidden" id="kf-is-new">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏•‡∏≥‡∏î‡∏±‡∏ö</label>
                    <input type="number" id="kf-order"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</label>
                    <input type="text" id="kf-th"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300"
                        placeholder="‡∏´‡∏°‡∏ß‡∏î‡∏ß‡πà‡∏≤‡∏î‡πâ‡∏ß‡∏¢...">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏≤‡∏´‡∏£‡∏±‡∏ö</label>
                    <input type="text" id="kf-ar" dir="rtl"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300 text-right font-arabic"
                        placeholder="ŸÉÿ™ÿßÿ®...">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</label>
                    <input type="text" id="kf-en"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300"
                        placeholder="Book of...">
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">üíæ
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    <button type="button" onclick="closeKitabModal()"
                        class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Book Info Modal -->
    <div id="book-info-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-bold text-gray-800">
                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠: <span id="bim-book-name" class="text-purple-600"></span>
                </h2>
            </div>
            <form id="book-info-form" class="p-6 space-y-4">
                <input type="hidden" id="bim-book-id">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (Description)</label>
                    <textarea id="bim-desc" rows="10"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300 font-sans leading-relaxed"
                        placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
                    <p class="text-xs text-gray-400 mt-1">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà</p>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">üíæ
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                    <button type="button" onclick="closeBookInfoModal()"
                        class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const API_BASE = '';
        let currentPage = 1;
        let totalPages = 1;
        let allBooks = [];

        // ========== Navigation ==========
        document.querySelectorAll('.sidebar-link[data-section]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = link.dataset.section;

                // Update active link
                document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');

                // Show section
                document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
                document.getElementById(`sec-${section}`).classList.remove('hidden');

                // Load data for section
                if (section === 'dashboard') loadDashboard();
                if (section === 'books') loadBooks();
                if (section === 'hadiths') loadHadithFilters();
                if (section === 'kitabs') { loadBookOptions(); loadKitabs(); }
                if (section === 'translations') loadTranslationStats();
            });
        });

        // ========== Dashboard ==========
        async function loadDashboard() {
            try {
                // Get overall stats
                const statsRes = await fetch(`${API_BASE}/api/stats`);
                const stats = await statsRes.json();

                document.getElementById('stat-total-hadiths').textContent = stats.overall.total.toLocaleString();
                document.getElementById('stat-translated').textContent = stats.overall.translated.toLocaleString();
                document.getElementById('stat-pending').textContent = stats.overall.pending.toLocaleString();
                document.getElementById('progress-percent').textContent = stats.overall.percentage + '%';
                document.getElementById('progress-bar').style.width = stats.overall.percentage + '%';

                // Get books
                const booksRes = await fetch(`${API_BASE}/api/books`);
                const booksData = await booksRes.json();
                allBooks = booksData.books;

                document.getElementById('stat-books').textContent = booksData.books.length;

                // Per book stats
                document.getElementById('books-stats').innerHTML = booksData.books.map(b => `
                    <div class="bg-gray-50 rounded-xl p-4 hover:bg-purple-50 transition">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-medium text-gray-700">${b.book}</span>
                            <span class="text-purple-600 font-bold">${b.percentage}%</span>
                        </div>
                        <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full" style="width: ${b.percentage}%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-400 mt-1">
                            <span>${b.translated.toLocaleString()} ‡πÅ‡∏õ‡∏•</span>
                            <span>${b.total.toLocaleString()} ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Dashboard error:', error);
            }
        }

        // ========== Books ==========
        async function loadBooks() {
            try {
                const res = await fetch(`${API_BASE}/api/books`);
                const data = await res.json();

                const BOOK_NAMES = {
                    bukhari: { th: '‡∏ã‡∏≠‡πÄ‡∏Æ‡∏µ‡∏¢‡∏∞‡∏Æ‡πå‡∏ö‡∏∏‡∏Ñ‡∏≠‡∏£‡∏µ', ar: 'ÿµÿ≠Ÿäÿ≠ ÿßŸÑÿ®ÿÆÿßÿ±Ÿä' },
                    muslim: { th: '‡∏ã‡∏≠‡πÄ‡∏Æ‡∏µ‡∏¢‡∏∞‡∏Æ‡πå‡∏°‡∏∏‡∏™‡∏•‡∏¥‡∏°', ar: 'ÿµÿ≠Ÿäÿ≠ ŸÖÿ≥ŸÑŸÖ' },
                    nasai: { th: '‡∏™‡∏∏‡∏ô‡∏±‡∏ô‡∏ô‡∏∞‡∏ã‡∏≤‡∏≠‡∏µ', ar: 'ÿ≥ŸÜŸÜ ÿßŸÑŸÜÿ≥ÿßÿ¶Ÿä' },
                    tirmidhi: { th: '‡∏™‡∏∏‡∏ô‡∏±‡∏ô‡∏ï‡∏¥‡∏£‡∏°‡∏¥‡∏ã‡∏µ', ar: 'ÿ¨ÿßŸÖÿπ ÿßŸÑÿ™ÿ±ŸÖÿ∞Ÿä' },
                    abudawud: { th: '‡∏™‡∏∏‡∏ô‡∏±‡∏ô‡∏≠‡∏∞‡∏ö‡∏π‡∏î‡∏≤‡∏ß‡∏π‡∏î', ar: 'ÿ≥ŸÜŸÜ ÿ£ÿ®Ÿä ÿØÿßŸàÿØ' },
                    ibnmajah: { th: '‡∏™‡∏∏‡∏ô‡∏±‡∏ô‡∏≠‡∏¥‡∏ö‡∏ô‡∏∏‡∏°‡∏≤‡∏ç‡∏∞‡∏Æ‡πå', ar: 'ÿ≥ŸÜŸÜ ÿßÿ®ŸÜ ŸÖÿßÿ¨Ÿá' },
                    malik: { th: '‡∏°‡∏∏‡∏ß‡∏±‡∏ï‡∏ï‡∏≠ ‡∏≠‡∏¥‡∏´‡∏°‡πà‡∏≤‡∏°‡∏°‡∏≤‡∏•‡∏¥‡∏Å', ar: 'ŸÖŸàÿ∑ÿ£ ÿßŸÑÿ•ŸÖÿßŸÖ ŸÖÿßŸÑŸÉ' },
                    darimi: { th: '‡∏™‡∏∏‡∏ô‡∏±‡∏ô‡∏î‡∏≤‡∏£‡∏¥‡∏°‡∏µ', ar: 'ÿ≥ŸÜŸÜ ÿßŸÑÿØÿßÿ±ŸÖŸä' },
                };

                document.getElementById('books-table').innerHTML = data.books.map(b => {
                    const info = BOOK_NAMES[b.book] || { th: b.book, ar: '' };
                    return `
                        <tr class="hover:bg-purple-50/50">
                            <td class="px-4 py-3">
                                <div class="font-medium text-gray-800">${info.th}</div>
                                <div class="text-xs text-gray-400">${b.book}</div>
                            </td>
                            <td class="px-4 py-3 text-right font-arabic" dir="rtl">${info.ar}</td>
                            <td class="px-4 py-3 text-center">
                                <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs">${b.translated.toLocaleString()} / ${b.total.toLocaleString()}</span>
                            </td>
                            <td class="px-4 py-3 text-center space-x-2">
                                <span class="text-sm font-bold text-gray-700">${b.percentage}%</span>
                                <div class="h-1.5 w-full bg-gray-200 rounded-full mt-1">
                                    <div class="h-full bg-purple-500 rounded-full" style="width: ${b.percentage}%"></div>
                                </div>
                            </td>
                            <td class="px-4 py-3 text-center">
                                <button onclick="editBookInfo('${b.book}', '${info.th}')" class="px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 text-sm border border-blue-200">
                                    ‚úèÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
            } catch (error) {
                console.error('Books error:', error);
            }
        }

        // ========== Hadiths ==========
        async function loadHadithFilters() {
            const select = document.getElementById('hadith-book-filter');
            if (select.options.length === 1) {
                try {
                    const res = await fetch(`${API_BASE}/api/books`);
                    const data = await res.json();
                    data.books.forEach(b => {
                        select.innerHTML += `<option value="${b.book}">${b.book}</option>`;
                    });
                } catch (e) { console.error(e); }
            }
        }

        async function searchHadiths() {
            const book = document.getElementById('hadith-book-filter').value;
            const status = document.getElementById('hadith-status-filter').value;
            const search = document.getElementById('hadith-search').value;

            try {
                let url = `${API_BASE}/api/hadiths`;
                if (book) url += `/${book}`;
                url += `?page=${currentPage}&limit=20`;
                if (status) url += `&status=${status}`;
                if (search) url += `&search=${encodeURIComponent(search)}`;

                const res = await fetch(url);
                const data = await res.json();

                totalPages = data.total_pages;
                document.getElementById('hadith-pagination-info').textContent =
                    `‡∏´‡∏ô‡πâ‡∏≤ ${data.page} / ${data.total_pages} (${data.total.toLocaleString()} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`;

                document.getElementById('hadiths-table').innerHTML = data.data.map(h => `
                    <tr class="hover:bg-purple-50/50">
                        <td class="px-4 py-3 text-xs text-gray-400 font-mono">${h.hadith_id}</td>
                        <td class="px-4 py-3 text-sm">${h.hadith_book}</td>
                        <td class="px-4 py-3 text-sm">${h.hadith_no || '-'}</td>
                        <td class="px-4 py-3 text-sm text-gray-600 max-w-[200px] truncate">${h.kitab?.th || h.kitab?.ar || '-'}</td>
                        <td class="px-4 py-3 text-center">
                            ${h.status === 'translated'
                        ? '<span class="px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs">‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß</span>'
                        : '<span class="px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs">‡∏£‡∏≠‡πÅ‡∏õ‡∏•</span>'
                    }
                        </td>
                        <td class="px-4 py-3 text-center">
                            <button onclick="editHadith('${h.hadith_id}')" class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200">
                                ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                            </button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) {
                console.error('Hadiths error:', error);
            }
        }

        function changePage(delta) {
            currentPage = Math.max(1, Math.min(totalPages, currentPage + delta));
            searchHadiths();
        }

        async function editHadith(hadithId) {
            try {
                const res = await fetch(`${API_BASE}/api/hadith/${hadithId}`);
                const h = await res.json();

                document.getElementById('hf-id').value = h.hadith_id;
                document.getElementById('hf-book').value = h.hadith_book;
                document.getElementById('hf-no').value = h.hadith_no || '';
                document.getElementById('hf-ar').value = h.content?.ar || '';
                document.getElementById('hf-th').value = h.content?.th || '';
                document.getElementById('hf-status').value = h.status || 'pending';

                document.getElementById('hadith-modal').classList.remove('hidden');
            } catch (e) { alert('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'); }
        }

        function closeHadithModal() {
            document.getElementById('hadith-modal').classList.add('hidden');
        }

        document.getElementById('hadith-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const hadithId = document.getElementById('hf-id').value;

            try {
                await fetch(`${API_BASE}/api/hadith/${hadithId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: {
                            ar: document.getElementById('hf-ar').value,
                            th: document.getElementById('hf-th').value
                        },
                        status: document.getElementById('hf-status').value
                    })
                });
                closeHadithModal();
                searchHadiths();
            } catch (e) { alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'); }
        });

        async function editBookInfo(bookId, bookName) {
            document.getElementById('bim-book-name').textContent = bookName;
            document.getElementById('bim-book-id').value = bookId;
            document.getElementById('bim-desc').value = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...';
            document.getElementById('book-info-modal').classList.remove('hidden');

            try {
                const res = await fetch(`${API_BASE}/api/book-info/${bookId}`);
                const data = await res.json();
                document.getElementById('bim-desc').value = data.description || '';
            } catch (e) {
                console.error(e);
                alert('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                document.getElementById('bim-desc').value = '';
            }
        }

        function closeBookInfoModal() {
            document.getElementById('book-info-modal').classList.add('hidden');
        }

        document.getElementById('book-info-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const bookId = document.getElementById('bim-book-id').value;
            const description = document.getElementById('bim-desc').value;

            try {
                const res = await fetch(`${API_BASE}/api/book-info/${bookId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ description })
                });

                if (res.ok) {
                    alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úÖ');
                    closeBookInfoModal();
                } else {
                    alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }
            } catch (e) { console.error(e); alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î'); }
        });

        // ========== Kitabs ==========
        async function loadBookOptions() {
            const select = document.getElementById('kitab-book-select');
            if (select.options.length === 0) {
                try {
                    const res = await fetch(`${API_BASE}/api/books`);
                    const data = await res.json();
                    data.books.forEach(b => {
                        select.innerHTML += `<option value="${b.book}">${b.book}</option>`;
                    });
                } catch (e) { console.error(e); }
            }
        }

        async function loadKitabs() {
            const book = document.getElementById('kitab-book-select').value;
            if (!book) return;

            try {
                const res = await fetch(`${API_BASE}/api/kitabs/${book}`);
                const data = await res.json();

                document.getElementById('kitabs-table').innerHTML = data.kitabs.map((k, i) => `
                    <tr class="hover:bg-purple-50/50">
                        <td class="px-4 py-3 text-sm">${k.id || (i + 1)}</td>
                        <td class="px-4 py-3 text-sm">${k.th || '-'}</td>
                        <td class="px-4 py-3 text-sm text-right font-arabic" dir="rtl">${k.ar || '-'}</td>
                        <td class="px-4 py-3 text-center">
                            <span class="px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs">${k.hadith_count || '?'}</span>
                        </td>
                        <td class="px-4 py-3 text-center space-x-1">
                            <button onclick="editKitab('${k.kitab_id}')" class="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200">‚úèÔ∏è</button>
                            <button onclick="deleteKitab('${k.kitab_id}')" class="px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200">üóëÔ∏è</button>
                        </td>
                    </tr>
                `).join('');
            } catch (error) { console.error('Kitabs error:', error); }
        }

        function addKitab() {
            const book = document.getElementById('kitab-book-select').value;
            if (!book) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }
            document.getElementById('kitab-modal-title').textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡πÉ‡∏´‡∏°‡πà';
            document.getElementById('kf-id').value = '';
            document.getElementById('kf-book').value = book;
            document.getElementById('kf-is-new').value = 'true';
            document.getElementById('kf-order').value = '';
            document.getElementById('kf-th').value = '';
            document.getElementById('kf-ar').value = '';
            document.getElementById('kf-en').value = '';
            document.getElementById('kitab-modal').classList.remove('hidden');
        }

        async function editKitab(kitabId) {
            try {
                const res = await fetch(`${API_BASE}/api/kitab/${kitabId}`);
                const k = await res.json();

                document.getElementById('kitab-modal-title').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏°‡∏ß‡∏î';
                document.getElementById('kf-id').value = k.kitab_id;
                document.getElementById('kf-book').value = k.book;
                document.getElementById('kf-is-new').value = 'false';
                document.getElementById('kf-order').value = k.order || '';
                document.getElementById('kf-th').value = k.name?.th || '';
                document.getElementById('kf-ar').value = k.name?.ar || '';
                document.getElementById('kf-en').value = k.name?.en || '';
                document.getElementById('kitab-modal').classList.remove('hidden');
            } catch (e) {
                alert('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                console.error(e);
            }
        }

        async function deleteKitab(kitabId) {
            if (!confirm(`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö ${kitabId}?`)) return;
            try {
                await fetch(`${API_BASE}/api/kitab/${kitabId}`, { method: 'DELETE' });
                loadKitabs();
            } catch (e) { alert('‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'); }
        }

        function closeKitabModal() {
            document.getElementById('kitab-modal').classList.add('hidden');
        }

        document.getElementById('kitab-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const isNew = document.getElementById('kf-is-new').value === 'true';
            const kitabId = document.getElementById('kf-id').value;
            const book = document.getElementById('kf-book').value;

            const data = {
                kitab_id: isNew ? `${book}_kitab_${Date.now()}` : kitabId,
                book: book,
                order: parseInt(document.getElementById('kf-order').value) || 1,
                name: {
                    th: document.getElementById('kf-th').value,
                    ar: document.getElementById('kf-ar').value,
                    en: document.getElementById('kf-en').value
                }
            };

            try {
                if (isNew) {
                    await fetch(`${API_BASE}/api/kitabs`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                } else {
                    await fetch(`${API_BASE}/api/kitab/${kitabId}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                }
                closeKitabModal();
                loadKitabs();
            } catch (e) {
                alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                console.error(e);
            }
        });


        // ========== Translations ==========
        async function loadTranslationStats() {
            // Placeholder - would need backend endpoints
            document.getElementById('missing-arabic').textContent = '~205';
            document.getElementById('english-in-thai').textContent = '~46';
            document.getElementById('recent-translations').innerHTML = `
                <div class="text-sm text-gray-500 text-center py-4">
                    ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° API endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                </div>
            `;
        }

        function runScript(script) {
            alert(`‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏±‡∏ô script ‡πÉ‡∏ô terminal:\npython ${script}.py`);
        }

        // ========== Init ==========
        loadDashboard();
    </script>
</body>

</html>